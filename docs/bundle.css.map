{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "..\\src\\App.svelte"
  ],
  "sourcesContent": [
    "<script>\nimport rarity from \"./rarity.js\";\nconst storage = createStorage();\nconst rarityNames = Object.keys(rarity);\nlet selectedRarity = storage.get(\"selectedRarity\", \"iron\");\nlet goalLevel = Math.min(storage.get(\"goalLevel\", 99), rarity[selectedRarity].length);\nconst expUnits = {\n  \"微金祝\": 1750,\n  \"小銀祝\": 4000,\n  \"八倍白胖\": 8000,\n  \"活動經驗包\": 10000,\n  \"八倍皇帝\": 16000,\n  \"小金祝/贈送祝聖\": 18000,\n  \"小白祝\": 19000,\n  \"小黑祝\": 20000,\n  \"八倍黑胖\": 40000,\n  \"大祝聖哈比\": 150000\n};\nconst goalLevelPresets = {\n  iron: [],\n  bronze: [],\n  silver: [30, 50, 55],\n  gold: [20, 50, 60, 80, 99],\n  platinum: [50, 70, 90, 99],\n  black: [50, 80, 99]\n};\nconst selectedUnits = Object.assign(\n  Object.fromEntries(Object.entries(expUnits).map(([name]) => [name, 0])),\n  storage.get(\"selectedUnits\")\n);\nlet totalExp = 0;\n$: requiredMinValue = rarity[selectedRarity][goalLevel - 1] - totalExp;\nlet requiredMinLevel = 0;\nlet sarietto = storage.get(\"sarietto\", false);\nlet goalLevelPresetNext = 0;\nlet goalLevelPresetPrev = 0;\n\n$: storage.set(\"selectedRarity\", selectedRarity);\n$: storage.set(\"goalLevel\", goalLevel);\n$: storage.set(\"selectedUnits\", selectedUnits);\n$: storage.set(\"sarietto\", sarietto);\n\n// calc total exp\n$: {\n  totalExp = 0;\n  const multiply = sarietto ? 11 : 10;\n  for (const [name, count] of Object.entries(selectedUnits)) {\n    totalExp += count * expUnits[name] * multiply / 10;\n  }\n}\n\n// calc required min level\n$: {\n  // find the level of min value\n  requiredMinLevel = rarity[selectedRarity].findIndex(f => f > requiredMinValue);\n  if (requiredMinLevel < 0) {\n    requiredMinLevel = rarity[selectedRarity].length;\n  }\n  requiredMinLevel--;\n}\n\n// goal level cap\n$: {\n  if (goalLevel >= rarity[selectedRarity].length) {\n    goalLevel = rarity[selectedRarity].length;\n  }\n}\n\n// calc goal level default\n$: {\n  const defaults = goalLevelPresets[selectedRarity];\n  let index;\n  if (defaults[defaults.length - 1] < goalLevel) {\n    index = defaults.length;\n  } else {\n    index = defaults.findIndex(i => i >= goalLevel);\n  }\n  goalLevelPresetPrev = index > 0 ? defaults[index - 1] : 0;\n  if (index >= 0 && defaults[index] === goalLevel) {\n    if (index + 1 < defaults.length) {\n      index++;\n    } else {\n      index = -1;\n    }\n  }\n  goalLevelPresetNext = index >= 0 ? defaults[index] : 0;\n}\n\nfunction createStorage() {\n  return {get, set};\n  \n  function get(key, default_) {\n    const value = localStorage.getItem(key);\n    if (value === null) {\n      return default_;\n    }\n    return JSON.parse(value);\n  }\n  \n  function set(key, value) {\n    localStorage.setItem(key, JSON.stringify(value));\n  }\n}\n</script>\n\n<style>\nlabel {\n  display: block;\n}\ninput, select {\n  font: inherit;\n  padding: 0.1em 0.3em;\n}\ninput[type=number] {\n  width: 100%;\n  box-sizing: border-box;\n}\n.form-group {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  align-items: center;\n}\n.number-group {\n  display: grid;\n  grid-template-columns: max-content 1fr max-content;\n}\n.span-2 {\n  grid-column-end: span 2;\n}\n</style>\n\n<h1>Aigis EXP Calculator</h1>\n<p>\n共可獲得 {totalExp} 經驗。\n\n{#if requiredMinValue < 0}\n  經驗值溢出 {-requiredMinValue}。\n{:else}\n  需先餵銅肥至 LV{requiredMinLevel + 1} ({rarity[selectedRarity][requiredMinLevel + 1] - requiredMinValue || '-'})。\n{/if}\n</p>\n<div class=\"form-group\">\n  <label for=\"rarity\">稀有度</label>\n  <select id=\"rarity\" bind:value={selectedRarity}>\n    {#each rarityNames as name}\n      <option value={name}>{name}</option>\n    {/each}\n  </select>\n  <label for=\"goalLevel\">目標等級</label>\n  <div class=\"number-group\">\n    <button type=\"button\" on:click={() => goalLevel = goalLevelPresetPrev} disabled={!goalLevelPresetPrev} title={goalLevelPresetPrev || \"\"}>&lt;</button>\n    <input id=\"goalLevel\" type=\"number\" bind:value={goalLevel} min=\"0\">\n    <button type=\"button\" on:click={() => goalLevel = goalLevelPresetNext} disabled={!goalLevelPresetNext} title={goalLevelPresetNext || \"\"}>&gt;</button>\n  </div>\n  <label class=\"span-2\">\n    <input type=\"checkbox\" bind:checked={sarietto}>\n    使用育成聖靈\n  </label>\n</div>\n<fieldset>\n  <legend>聖靈︰</legend>\n  <div class=\"form-group\">\n    {#each Object.entries(expUnits) as [unitName, value]}\n      <label for={unitName}>\n        {unitName} ({value})\n      </label>\n      <div class=\"number-group\">\n        <button type=\"button\" on:click={() => selectedUnits[unitName]--} disabled={selectedUnits[unitName] < 1}>-</button>\n        <input id={unitName} type=\"number\" bind:value={selectedUnits[unitName]} min=\"0\">\n        <button type=\"button\" on:click={() => selectedUnits[unitName]++}>+</button>\n      </div>\n    {/each}\n  </div>\n</fieldset>\n"
  ],
  "names": [],
  "mappings": "AA0GA,KAAK,eAAC,CAAC,AACL,OAAO,CAAE,KAAK,AAChB,CAAC,AACD,oBAAK,CAAE,MAAM,eAAC,CAAC,AACb,IAAI,CAAE,OAAO,CACb,OAAO,CAAE,KAAK,CAAC,KAAK,AACtB,CAAC,AACD,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,eAAC,CAAC,AAClB,KAAK,CAAE,IAAI,CACX,UAAU,CAAE,UAAU,AACxB,CAAC,AACD,WAAW,eAAC,CAAC,AACX,OAAO,CAAE,IAAI,CACb,qBAAqB,CAAE,GAAG,CAAC,GAAG,CAC9B,WAAW,CAAE,MAAM,AACrB,CAAC,AACD,aAAa,eAAC,CAAC,AACb,OAAO,CAAE,IAAI,CACb,qBAAqB,CAAE,WAAW,CAAC,GAAG,CAAC,WAAW,AACpD,CAAC,AACD,OAAO,eAAC,CAAC,AACP,eAAe,CAAE,IAAI,CAAC,CAAC,AACzB,CAAC"
}