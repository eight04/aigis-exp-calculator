var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function l(e){e.forEach(t)}function r(e){return"function"==typeof e}function i(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function a(e,t){e.appendChild(t)}function o(e,t,n){e.insertBefore(t,n||null)}function c(e){e.parentNode.removeChild(e)}function s(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function u(e){return document.createElement(e)}function d(e){return document.createTextNode(e)}function f(){return d(" ")}function g(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function v(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function p(e){return""===e?void 0:+e}function h(e,t){t=""+t,e.data!==t&&(e.data=t)}function m(e,t){(null!=t||e.value)&&(e.value=t)}function b(e,t){for(let n=0;n<e.options.length;n+=1){const l=e.options[n];if(l.__value===t)return void(l.selected=!0)}}let y;function _(e){y=e}const L=[],x=[],$=[],k=[],N=Promise.resolve();let q=!1;function P(e){$.push(e)}function M(){const e=new Set;do{for(;L.length;){const e=L.shift();_(e),U(e.$$)}for(;x.length;)x.pop()();for(let t=0;t<$.length;t+=1){const n=$[t];e.has(n)||(n(),e.add(n))}$.length=0}while(L.length);for(;k.length;)k.pop()();q=!1}function U(e){e.fragment&&(e.update(e.dirty),l(e.before_update),e.fragment.p(e.dirty,e.ctx),e.dirty=null,e.after_update.forEach(P))}const O=new Set;const R="undefined"!=typeof window?window:global;function j(e,t){e.$$.dirty||(L.push(e),q||(q=!0,N.then(M)),e.$$.dirty=n()),e.$$.dirty[t]=!0}function E(i,a,o,c,s,u){const d=y;_(i);const f=a.props||{},g=i.$$={fragment:null,ctx:null,props:u,update:e,not_equal:s,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:[]),callbacks:n(),dirty:null};let v=!1;var p,h;g.ctx=o?o(i,f,(e,t,n=t)=>(g.ctx&&s(g.ctx[e],g.ctx[e]=n)&&(g.bound[e]&&g.bound[e](n),v&&j(i,e)),t)):f,g.update(),v=!0,l(g.before_update),g.fragment=c(g.ctx),a.target&&(a.hydrate?g.fragment.l(function(e){return Array.from(e.childNodes)}(a.target)):g.fragment.c(),a.intro&&((p=i.$$.fragment)&&p.i&&(O.delete(p),p.i(h))),function(e,n,i){const{fragment:a,on_mount:o,on_destroy:c,after_update:s}=e.$$;a.m(n,i),P(()=>{const n=o.map(t).filter(r);c?c.push(...n):l(n),e.$$.on_mount=[]}),s.forEach(P)}(i,a.target,a.anchor),M()),_(d)}class V{$destroy(){var t,n;n=1,(t=this).$$.fragment&&(l(t.$$.on_destroy),t.$$.fragment.d(n),t.$$.on_destroy=t.$$.fragment=null,t.$$.ctx={}),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}var w={iron:[0,32,65,100,135,172,211,250,291,333,418,506,598,693,791,893,998,1106,1218,1333,1503,1679,1862,2052,2249,2452,2662,2879,3103,3333],bronze:[0,35,72,110,149,189,232,275,320,366,460,557,658,762,870,982,1098,1217,1340,1466,1653,1847,2048,2257,2474,2697,2928,3167,3413,3666,3978,4301,4637,4984,5345,5718,6103,6501,6910,7334],silver:[0,38,78,120,162,206,253,300,349,400,502,607,718,832,949,1072,1198,1327,1462,1600,1804,2015,2234,2462,2699,2942,3194,3455,3724,4e3,4339,4692,5058,5437,5831,6238,6658,7092,7538,8e3,8678,9383,10115,10874,11662,12474,13315,14183,15078,16e3,17017,18074,19172,20312,21492],gold:[0,42,85,130,176,224,274,325,378,433,543,658,777,901,1028,1161,1297,1438,1583,1733,1954,2183,2421,2668,2924,3188,3461,3743,4034,4333,4701,5083,5480,5890,6317,6757,7212,7683,8167,8667,9402,10165,10958,11781,12633,13514,14425,15365,16335,17333,18435,19581,20770,22005,23283,24605,25970,27381,28835,30333,31802,33329,34917,36561,38266,40028,41850,43729,45669,47667,49503,51412,53395,55452,57582,59786,62062,64412,66836,69333,71904,74577,77354,80233,83214,86299,89487,92777,96170,99667,102237,104911,107687,110566,113549,116633,119820,123111,126504],platinum:[0,45,91,140,189,241,295,350,407,466,585,708,837,970,1107,1250,1397,1548,1705,1866,2104,2351,2607,2873,3149,3433,3727,4031,4344,4666,5062,5474,5901,6343,6803,7277,7767,8274,8795,9334,10125,10947,11801,12687,13605,14553,15534,16547,17591,18666,19853,21087,22368,23698,25074,26498,27968,29487,31053,32666,34248,35893,37603,39374,41209,43107,45069,47093,49182,51334,53311,55367,57502,59717,62012,64385,66836,69367,71977,74666,77435,80314,83304,86405,89615,92938,96370,99914,103568,107334,110102,112981,115970,119071,122283,125605,129037,132581,136235],black:[0,48,98,150,203,258,317,375,437,500,627,759,897,1040,1187,1340,1497,1659,1827,2e3,2255,2519,2793,3078,3374,3678,3993,4319,4655,5e3,5424,5865,6323,6797,7289,7797,8322,8865,9423,10001,10848,11729,12644,13593,14577,15593,16644,17729,18848,2e4,21272,22593,23966,25391,26865,28391,29966,31593,33272,35e3,36695,38457,40289,42186,44153,46187,48288,50457,52695,55001,57119,59322,61610,63983,66441,68984,71610,74322,77118,8e4,82967,86051,89255,92577,96017,99576,103254,107051,110966,115001,117966,121052,124254,127577,131018,134577,138254,142052,145967]};const{Object:C}=R;function S(e,t,n){const l=C.create(e);return l.unitName=t[n][0],l.value=t[n][1],l}function A(e,t,n){const l=C.create(e);return l.name=t[n],l}function I(e){var t,n,l,r,i,a=e.requiredMinLevel+1+"",s=w[e.selectedRarity][e.requiredMinLevel+1]-e.requiredMinValue||"-";return{c(){t=d("需先餵銅肥至 LV"),n=d(a),l=d(" ("),r=d(s),i=d(")。")},m(e,a){o(e,t,a),o(e,n,a),o(e,l,a),o(e,r,a),o(e,i,a)},p(e,t){e.requiredMinLevel&&a!==(a=t.requiredMinLevel+1+"")&&h(n,a),(e.selectedRarity||e.requiredMinLevel||e.requiredMinValue)&&s!==(s=w[t.selectedRarity][t.requiredMinLevel+1]-t.requiredMinValue||"-")&&h(r,s)},d(e){e&&(c(t),c(n),c(l),c(r),c(i))}}}function z(e){var t,n,l,r=-e.requiredMinValue+"";return{c(){t=d("經驗值溢出 "),n=d(r),l=d("。")},m(e,r){o(e,t,r),o(e,n,r),o(e,l,r)},p(e,t){e.requiredMinValue&&r!==(r=-t.requiredMinValue+"")&&h(n,r)},d(e){e&&(c(t),c(n),c(l))}}}function J(t){var n,l,r=t.name+"";return{c(){n=u("option"),l=d(r),n.__value=t.name,n.value=n.__value},m(e,t){o(e,n,t),a(n,l)},p:e,d(e){e&&c(n)}}}function B(e){var t,n,r,i,s,p,h,b,y,_,L,x,$,k,N,q,P=e.unitName+"",M=e.value+"",U=!1;function O(){return e.click_handler_2(e)}function R(){U=!0,e.input_input_handler.call(x,e)}function j(){return e.click_handler_3(e)}return{c(){t=u("label"),n=d(P),r=d(" ("),i=d(M),s=d(")"),p=f(),h=u("div"),b=u("button"),y=d("-"),L=f(),x=u("input"),$=f(),(k=u("button")).textContent="+",N=f(),v(t,"for",e.unitName),v(t,"class","svelte-11lkdat"),v(b,"type","button"),b.disabled=_=e.selectedUnits[e.unitName]<1,v(x,"id",e.unitName),v(x,"type","number"),v(x,"min","0"),v(x,"class","svelte-11lkdat"),v(k,"type","button"),v(h,"class","number-group svelte-11lkdat"),q=[g(b,"click",O),g(x,"input",R),g(k,"click",j)]},m(l,c){o(l,t,c),a(t,n),a(t,r),a(t,i),a(t,s),o(l,p,c),o(l,h,c),a(h,b),a(b,y),a(h,L),a(h,x),m(x,e.selectedUnits[e.unitName]),a(h,$),a(h,k),a(h,N)},p(t,n){e=n,t.selectedUnits&&_!==(_=e.selectedUnits[e.unitName]<1)&&(b.disabled=_),!U&&(t.selectedUnits||t.Object||t.expUnits)&&m(x,e.selectedUnits[e.unitName]),U=!1},d(e){e&&(c(t),c(p),c(h)),l(q)}}}function T(t){var n,r,i,p,y,_,L,x,$,k,N,q,M,U,O,R,j,E,V,w,C,T,X,D,F,G,H,K,Q,W,Y,Z,ee,te,ne,le,re=!1;function ie(e,t){return t.requiredMinValue<0?z:I}var ae=ie(0,t),oe=ae(t);let ce=t.rarityNames,se=[];for(let e=0;e<ce.length;e+=1)se[e]=J(A(t,ce,e));function ue(){re=!0,t.input0_input_handler.call(C)}let de=t.Object.entries(t.expUnits),fe=[];for(let e=0;e<de.length;e+=1)fe[e]=B(S(t,de,e));return{c(){(n=u("h1")).textContent="Aigis EXP Calculator",r=f(),i=u("p"),p=d("共可獲得 "),y=d(t.totalExp),_=d(" 經驗。\n\n"),oe.c(),L=f(),x=u("div"),($=u("label")).textContent="稀有度",k=f(),N=u("select");for(let e=0;e<se.length;e+=1)se[e].c();q=f(),(M=u("label")).textContent="目標等級",U=f(),O=u("div"),R=u("button"),j=d("<"),w=f(),C=u("input"),T=f(),X=u("button"),D=d(">"),H=f(),K=u("label"),Q=u("input"),W=d("\n    使用育成聖靈"),Y=f(),Z=u("fieldset"),(ee=u("legend")).textContent="聖靈︰",te=f(),ne=u("div");for(let e=0;e<fe.length;e+=1)fe[e].c();v($,"for","rarity"),v($,"class","svelte-11lkdat"),void 0===t.selectedRarity&&P(()=>t.select_change_handler.call(N)),v(N,"id","rarity"),v(N,"class","svelte-11lkdat"),v(M,"for","goalLevel"),v(M,"class","svelte-11lkdat"),v(R,"type","button"),R.disabled=E=!t.goalLevelPresetPrev,v(R,"title",V=t.goalLevelPresetPrev||""),v(C,"id","goalLevel"),v(C,"type","number"),v(C,"min","0"),v(C,"class","svelte-11lkdat"),v(X,"type","button"),X.disabled=F=!t.goalLevelPresetNext,v(X,"title",G=t.goalLevelPresetNext||""),v(O,"class","number-group svelte-11lkdat"),v(Q,"type","checkbox"),v(Q,"class","svelte-11lkdat"),v(K,"class","span-2 svelte-11lkdat"),v(x,"class","form-group svelte-11lkdat"),v(ne,"class","form-group svelte-11lkdat"),le=[g(N,"change",t.select_change_handler),g(R,"click",t.click_handler),g(C,"input",ue),g(X,"click",t.click_handler_1),g(Q,"change",t.input1_change_handler)]},m(e,l){o(e,n,l),o(e,r,l),o(e,i,l),a(i,p),a(i,y),a(i,_),oe.m(i,null),o(e,L,l),o(e,x,l),a(x,$),a(x,k),a(x,N);for(let e=0;e<se.length;e+=1)se[e].m(N,null);b(N,t.selectedRarity),a(x,q),a(x,M),a(x,U),a(x,O),a(O,R),a(R,j),a(O,w),a(O,C),m(C,t.goalLevel),a(O,T),a(O,X),a(X,D),a(x,H),a(x,K),a(K,Q),Q.checked=t.sarietto,a(K,W),o(e,Y,l),o(e,Z,l),a(Z,ee),a(Z,te),a(Z,ne);for(let e=0;e<fe.length;e+=1)fe[e].m(ne,null)},p(e,t){if(e.totalExp&&h(y,t.totalExp),ae===(ae=ie(0,t))&&oe?oe.p(e,t):(oe.d(1),(oe=ae(t))&&(oe.c(),oe.m(i,null))),e.rarityNames){let n;for(ce=t.rarityNames,n=0;n<ce.length;n+=1){const l=A(t,ce,n);se[n]?se[n].p(e,l):(se[n]=J(l),se[n].c(),se[n].m(N,null))}for(;n<se.length;n+=1)se[n].d(1);se.length=ce.length}if(e.selectedRarity&&b(N,t.selectedRarity),e.goalLevelPresetPrev&&E!==(E=!t.goalLevelPresetPrev)&&(R.disabled=E),e.goalLevelPresetPrev&&V!==(V=t.goalLevelPresetPrev||"")&&v(R,"title",V),!re&&e.goalLevel&&m(C,t.goalLevel),re=!1,e.goalLevelPresetNext&&F!==(F=!t.goalLevelPresetNext)&&(X.disabled=F),e.goalLevelPresetNext&&G!==(G=t.goalLevelPresetNext||"")&&v(X,"title",G),e.sarietto&&(Q.checked=t.sarietto),e.Object||e.expUnits||e.selectedUnits){let n;for(de=t.Object.entries(t.expUnits),n=0;n<de.length;n+=1){const l=S(t,de,n);fe[n]?fe[n].p(e,l):(fe[n]=B(l),fe[n].c(),fe[n].m(ne,null))}for(;n<fe.length;n+=1)fe[n].d(1);fe.length=de.length}},i:e,o:e,d(e){e&&(c(n),c(r),c(i)),oe.d(),e&&(c(L),c(x)),s(se,e),e&&(c(Y),c(Z)),s(fe,e),l(le)}}}function X(e,t,n){const l={get:function(e,t){const n=localStorage.getItem(e);return null===n?t:JSON.parse(n)},set:function(e,t){localStorage.setItem(e,JSON.stringify(t))}},r=Object.keys(w);let i=l.get("selectedRarity","iron"),a=Math.min(l.get("goalLevel",99),w[i].length);const o={"微金祝":1750,"小銀祝":4e3,"八倍白胖":8e3,"活動經驗包":1e4,"八倍皇帝":16e3,"小金祝/贈送祝聖":18e3,"小白祝":19e3,"小黑祝":2e4,"八倍黑胖":4e4,"大祝聖哈比":15e4},c={iron:[],bronze:[],silver:[30,50,55],gold:[20,50,60,80,99],platinum:[50,70,90,99],black:[50,80,99]},s=Object.assign(Object.fromEntries(Object.entries(o).map(([e])=>[e,0])),l.get("selectedUnits"));let u=0,d=0,f=l.get("sarietto",!1),g=0,v=0;let h;return e.$$.update=(e={goalLevel:1,selectedRarity:1,sarietto:1,selectedUnits:1,totalExp:1,requiredMinValue:1,requiredMinLevel:1})=>{if((e.goalLevel||e.selectedRarity)&&a>=w[i].length&&n("goalLevel",a=w[i].length),e.sarietto||e.selectedUnits){n("totalExp",u=0);const e=f?11:10;for(const[t,l]of Object.entries(s))n("totalExp",u+=l*o[t]*e/10)}if((e.selectedRarity||e.goalLevel||e.totalExp)&&n("requiredMinValue",h=w[i][a-1]-u),e.selectedRarity&&l.set("selectedRarity",i),e.goalLevel&&l.set("goalLevel",a),e.selectedUnits&&l.set("selectedUnits",s),e.sarietto&&l.set("sarietto",f),(e.selectedRarity||e.requiredMinValue||e.requiredMinLevel)&&(n("requiredMinLevel",d=w[i].findIndex(e=>e>h)),d<0&&n("requiredMinLevel",d=w[i].length),n("requiredMinLevel",d--,d)),e.selectedRarity||e.goalLevel){const e=c[i];let t;t=e[e.length-1]<a?e.length:e.findIndex(e=>e>=a),n("goalLevelPresetPrev",v=t>0?e[t-1]:0),t>=0&&e[t]===a&&(t+1<e.length?t++:t=-1),n("goalLevelPresetNext",g=t>=0?e[t]:0)}},{rarityNames:r,selectedRarity:i,goalLevel:a,expUnits:o,selectedUnits:s,totalExp:u,requiredMinLevel:d,sarietto:f,goalLevelPresetNext:g,goalLevelPresetPrev:v,Object:Object,requiredMinValue:h,select_change_handler:function(){i=function(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}(this),n("selectedRarity",i),n("rarityNames",r)},click_handler:()=>n("goalLevel",a=v),input0_input_handler:function(){a=p(this.value),n("goalLevel",a),n("selectedRarity",i)},click_handler_1:()=>n("goalLevel",a=g),input1_change_handler:function(){f=this.checked,n("sarietto",f)},click_handler_2:({unitName:e})=>n("selectedUnits",s[e]--,s),input_input_handler:function({unitName:e}){s[e]=p(this.value),n("selectedUnits",s),n("Object",Object),n("expUnits",o)},click_handler_3:({unitName:e})=>n("selectedUnits",s[e]++,s)}}return new class extends V{constructor(e){super(),E(this,e,X,T,i,[])}}({target:document.querySelector(".container")})}();
//# sourceMappingURL=bundle.js.map
