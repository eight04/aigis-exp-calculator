var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function l(e){e.forEach(t)}function r(e){return"function"==typeof e}function i(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function a(e,t){e.appendChild(t)}function o(e,t,n){e.insertBefore(t,n||null)}function c(e){e.parentNode.removeChild(e)}function s(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function u(e){return document.createElement(e)}function d(e){return document.createTextNode(e)}function f(){return d(" ")}function v(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function g(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function h(e){return""===e?void 0:+e}function p(e,t){t=""+t,e.data!==t&&(e.data=t)}function m(e,t){for(let n=0;n<e.options.length;n+=1){const l=e.options[n];if(l.__value===t)return void(l.selected=!0)}}let y;function _(e){y=e}const b=[],L=Promise.resolve();let x=!1;const $=[],N=[],k=[];function q(e){N.push(e)}function M(){const e=new Set;do{for(;b.length;){const e=b.shift();_(e),P(e.$$)}for(;$.length;)$.shift()();for(;N.length;){const t=N.pop();e.has(t)||(t(),e.add(t))}}while(b.length);for(;k.length;)k.pop()();x=!1}function P(e){e.fragment&&(e.update(e.dirty),l(e.before_render),e.fragment.p(e.dirty,e.ctx),e.dirty=null,e.after_render.forEach(q))}function U(e,t){e.$$.dirty||(b.push(e),x||(x=!0,L.then(M)),e.$$.dirty=n()),e.$$.dirty[t]=!0}function R(i,a,o,c,s,u){const d=y;_(i);const f=a.props||{},v=i.$$={fragment:null,ctx:null,props:u,update:e,not_equal:s,bound:n(),on_mount:[],on_destroy:[],before_render:[],after_render:[],context:new Map(d?d.$$.context:[]),callbacks:n(),dirty:null};let g=!1;v.ctx=o?o(i,f,(e,t)=>{v.ctx&&s(v.ctx[e],v.ctx[e]=t)&&(v.bound[e]&&v.bound[e](t),g&&U(i,e))}):f,v.update(),g=!0,l(v.before_render),v.fragment=c(v.ctx),a.target&&(a.hydrate?v.fragment.l(function(e){return Array.from(e.childNodes)}(a.target)):v.fragment.c(),a.intro&&i.$$.fragment.i&&i.$$.fragment.i(),function(e,n,i){const{fragment:a,on_mount:o,on_destroy:c,after_render:s}=e.$$;a.m(n,i),q(()=>{const n=o.map(t).filter(r);c?c.push(...n):l(n),e.$$.on_mount=[]}),s.forEach(q)}(i,a.target,a.anchor),M()),_(d)}class O{$destroy(){var t,n;n=!0,(t=this).$$&&(l(t.$$.on_destroy),t.$$.fragment.d(n),t.$$.on_destroy=t.$$.fragment=null,t.$$.ctx={}),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}var j={iron:[0,32,65,100,135,172,211,250,291,333,418,506,598,693,791,893,998,1106,1218,1333,1503,1679,1862,2052,2249,2452,2662,2879,3103,3333],bronze:[0,35,72,110,149,189,232,275,320,366,460,557,658,762,870,982,1098,1217,1340,1466,1653,1847,2048,2257,2474,2697,2928,3167,3413,3666,3978,4301,4637,4984,5345,5718,6103,6501,6910,7334],silver:[0,38,78,120,162,206,253,300,349,400,502,607,718,832,949,1072,1198,1327,1462,1600,1804,2015,2234,2462,2699,2942,3194,3455,3724,4e3,4339,4692,5058,5437,5831,6238,6658,7092,7538,8e3,8678,9383,10115,10874,11662,12474,13315,14183,15078,16e3,17017,18074,19172,20312,21492],gold:[0,42,85,130,176,224,274,325,378,433,543,658,777,901,1028,1161,1297,1438,1583,1733,1954,2183,2421,2668,2924,3188,3461,3743,4034,4333,4701,5083,5480,5890,6317,6757,7212,7683,8167,8667,9402,10165,10958,11781,12633,13514,14425,15365,16335,17333,18435,19581,20770,22005,23283,24605,25970,27381,28835,30333,31802,33329,34917,36561,38266,40028,41850,43729,45669,47667,49503,51412,53395,55452,57582,59786,62062,64412,66836,69333,71904,74577,77354,80233,83214,86299,89487,92777,96170,99667,102237,104911,107687,110566,113549,116633,119820,123111,126504],platinum:[0,45,91,140,189,241,295,350,407,466,585,708,837,970,1107,1250,1397,1548,1705,1866,2104,2351,2607,2873,3149,3433,3727,4031,4344,4666,5062,5474,5901,6343,6803,7277,7767,8274,8795,9334,10125,10947,11801,12687,13605,14553,15534,16547,17591,18666,19853,21087,22368,23698,25074,26498,27968,29487,31053,32666,34248,35893,37603,39374,41209,43107,45069,47093,49182,51334,53311,55367,57502,59717,62012,64385,66836,69367,71977,74666,77435,80314,83304,86405,89615,92938,96370,99914,103568,107334,110102,112981,115970,119071,122283,125605,129037,132581,136235],black:[0,48,98,150,203,258,317,375,437,500,627,759,897,1040,1187,1340,1497,1659,1827,2e3,2255,2519,2793,3078,3374,3678,3993,4319,4655,5e3,5424,5865,6323,6797,7289,7797,8322,8865,9423,10001,10848,11729,12644,13593,14577,15593,16644,17729,18848,2e4,21272,22593,23966,25391,26865,28391,29966,31593,33272,35e3,36695,38457,40289,42186,44153,46187,48288,50457,52695,55001,57119,59322,61610,63983,66441,68984,71610,74322,77118,8e4,82967,86051,89255,92577,96017,99576,103254,107051,110966,115001,117966,121052,124254,127577,131018,134577,138254,142052,145967]};function E(e,t,n){const l=Object.create(e);return l.unitName=t[n][0],l.value=t[n][1],l}function V(e,t,n){const l=Object.create(e);return l.name=t[n],l}function C(e){var t,n,l,r,i,a=e.requiredMinLevel+1,s=j[e.selectedRarity][e.requiredMinLevel+1]-e.requiredMinValue||"-";return{c(){t=d("需先餵銅肥至 LV"),n=d(a),l=d(" ("),r=d(s),i=d(")。")},m(e,a){o(e,t,a),o(e,n,a),o(e,l,a),o(e,r,a),o(e,i,a)},p(e,t){e.requiredMinLevel&&a!==(a=t.requiredMinLevel+1)&&p(n,a),(e.selectedRarity||e.requiredMinLevel||e.requiredMinValue)&&s!==(s=j[t.selectedRarity][t.requiredMinLevel+1]-t.requiredMinValue||"-")&&p(r,s)},d(e){e&&(c(t),c(n),c(l),c(r),c(i))}}}function S(e){var t,n,l,r=-e.requiredMinValue;return{c(){t=d("經驗值溢出 "),n=d(r),l=d("。")},m(e,r){o(e,t,r),o(e,n,r),o(e,l,r)},p(e,t){e.requiredMinValue&&r!==(r=-t.requiredMinValue)&&p(n,r)},d(e){e&&(c(t),c(n),c(l))}}}function w(e){var t,n,l=e.name;return{c(){t=u("option"),n=d(l),t.__value=e.name,t.value=t.__value},m(e,l){o(e,t,l),a(t,n)},p(e,n){t.value=t.__value},d(e){e&&c(t)}}}function A(e){var t,n,r,i,s,h,p,m,y,_,b,L,x,$,N,k,q=e.unitName,M=e.value;function P(){return e.click_handler_2(e)}function U(){e.input_input_handler.call(L,e)}function R(){return e.click_handler_3(e)}return{c(){t=u("label"),n=d(q),r=d(" ("),i=d(M),s=d(")"),h=f(),p=u("div"),m=u("button"),y=d("-"),b=f(),L=u("input"),x=f(),($=u("button")).textContent="+",N=f(),t.htmlFor=e.unitName,t.className="svelte-11lkdat",m.type="button",m.disabled=_=e.selectedUnits[e.unitName]<1,L.id=e.unitName,g(L,"type","number"),L.min="0",L.className="svelte-11lkdat",$.type="button",p.className="number-group svelte-11lkdat",k=[v(m,"click",P),v(L,"input",U),v($,"click",R)]},m(l,c){o(l,t,c),a(t,n),a(t,r),a(t,i),a(t,s),o(l,h,c),o(l,p,c),a(p,m),a(m,y),a(p,b),a(p,L),L.value=e.selectedUnits[e.unitName],a(p,x),a(p,$),a(p,N)},p(t,n){e=n,t.selectedUnits&&_!==(_=e.selectedUnits[e.unitName]<1)&&(m.disabled=_),(t.selectedUnits||t.Object||t.expUnits)&&(L.value=e.selectedUnits[e.unitName])},d(e){e&&(c(t),c(h),c(p)),l(k)}}}function I(t){var n,r,i,h,y,_,b,L,x,$,N,k,M,P,U,R,O,j,I,F,z,J,B,T,X,D,G,H,K,Q,W,Y,Z,ee,te,ne;function le(e){return e.requiredMinValue<0?S:C}for(var re=le(t),ie=re(t),ae=t.rarityNames,oe=[],ce=0;ce<ae.length;ce+=1)oe[ce]=w(V(t,ae,ce));var se=t.Object.entries(t.expUnits),ue=[];for(ce=0;ce<se.length;ce+=1)ue[ce]=A(E(t,se,ce));return{c(){(n=u("h1")).textContent="Aigis EXP Calculator",r=f(),i=u("p"),h=d("共可獲得 "),y=d(t.totalExp),_=d(" 經驗。\n\n"),ie.c(),b=f(),L=u("div"),(x=u("label")).textContent="稀有度",$=f(),N=u("select");for(var e=0;e<oe.length;e+=1)oe[e].c();k=f(),(M=u("label")).textContent="目標等級",P=f(),U=u("div"),R=u("button"),O=d("<"),F=f(),z=u("input"),J=f(),B=u("button"),T=d(">"),G=f(),H=u("label"),K=u("input"),Q=d("\n    使用育成聖靈"),W=f(),Y=u("fieldset"),(Z=u("legend")).textContent="聖靈︰",ee=f(),te=u("div");for(e=0;e<ue.length;e+=1)ue[e].c();x.htmlFor="rarity",x.className="svelte-11lkdat",void 0===t.selectedRarity&&q(()=>t.select_change_handler.call(N)),N.id="rarity",N.className="svelte-11lkdat",M.htmlFor="goalLevel",M.className="svelte-11lkdat",R.type="button",R.disabled=j=!t.goalLevelPresetPrev,R.title=I=t.goalLevelPresetPrev||"",z.id="goalLevel",g(z,"type","number"),z.min="0",z.className="svelte-11lkdat",B.type="button",B.disabled=X=!t.goalLevelPresetNext,B.title=D=t.goalLevelPresetNext||"",U.className="number-group svelte-11lkdat",g(K,"type","checkbox"),K.className="svelte-11lkdat",H.className="span-2 svelte-11lkdat",L.className="form-group svelte-11lkdat",te.className="form-group unit-controls svelte-11lkdat",ne=[v(N,"change",t.select_change_handler),v(R,"click",t.click_handler),v(z,"input",t.input0_input_handler),v(B,"click",t.click_handler_1),v(K,"change",t.input1_change_handler)]},m(e,l){o(e,n,l),o(e,r,l),o(e,i,l),a(i,h),a(i,y),a(i,_),ie.m(i,null),o(e,b,l),o(e,L,l),a(L,x),a(L,$),a(L,N);for(var c=0;c<oe.length;c+=1)oe[c].m(N,null);m(N,t.selectedRarity),a(L,k),a(L,M),a(L,P),a(L,U),a(U,R),a(R,O),a(U,F),a(U,z),z.value=t.goalLevel,a(U,J),a(U,B),a(B,T),a(L,G),a(L,H),a(H,K),K.checked=t.sarietto,a(H,Q),o(e,W,l),o(e,Y,l),a(Y,Z),a(Y,ee),a(Y,te);for(c=0;c<ue.length;c+=1)ue[c].m(te,null)},p(e,t){if(e.totalExp&&p(y,t.totalExp),re===(re=le(t))&&ie?ie.p(e,t):(ie.d(1),(ie=re(t))&&(ie.c(),ie.m(i,null))),e.rarityNames){ae=t.rarityNames;for(var n=0;n<ae.length;n+=1){const l=V(t,ae,n);oe[n]?oe[n].p(e,l):(oe[n]=w(l),oe[n].c(),oe[n].m(N,null))}for(;n<oe.length;n+=1)oe[n].d(1);oe.length=ae.length}if(e.selectedRarity&&m(N,t.selectedRarity),e.goalLevelPresetPrev&&j!==(j=!t.goalLevelPresetPrev)&&(R.disabled=j),e.goalLevelPresetPrev&&I!==(I=t.goalLevelPresetPrev||"")&&(R.title=I),e.goalLevel&&(z.value=t.goalLevel),e.goalLevelPresetNext&&X!==(X=!t.goalLevelPresetNext)&&(B.disabled=X),e.goalLevelPresetNext&&D!==(D=t.goalLevelPresetNext||"")&&(B.title=D),e.sarietto&&(K.checked=t.sarietto),e.Object||e.expUnits||e.selectedUnits){se=t.Object.entries(t.expUnits);for(n=0;n<se.length;n+=1){const l=E(t,se,n);ue[n]?ue[n].p(e,l):(ue[n]=A(l),ue[n].c(),ue[n].m(te,null))}for(;n<ue.length;n+=1)ue[n].d(1);ue.length=se.length}},i:e,o:e,d(e){e&&(c(n),c(r),c(i)),ie.d(),e&&(c(b),c(L)),s(oe,e),e&&(c(W),c(Y)),s(ue,e),l(ne)}}}function F(e,t,n){const l={get:function(e,t){const n=localStorage.getItem(e);return null===n?t:JSON.parse(n)},set:function(e,t){localStorage.setItem(e,JSON.stringify(t))}},r=Object.keys(j);let i=l.get("selectedRarity","iron"),a=Math.min(l.get("goalLevel",99),j[i].length);const o={"微金祝":1750,"小銀祝":4e3,"八倍白胖":8e3,"活動經驗包":1e4,"八倍皇帝":16e3,"小金祝/贈送祝聖":18e3,"小白祝":19e3,"小黑祝":2e4,"八倍黑胖":4e4,"大祝聖哈比":15e4},c={iron:[],bronze:[],silver:[30,50,55],gold:[20,50,60,80,99],platinum:[50,70,90,99],black:[50,80,99]},s=Object.assign(Object.fromEntries(Object.entries(o).map(([e])=>[e,0])),l.get("selectedUnits"));let u,d,f,v=0,g=0,p=l.get("sarietto",!1);return e.$$.update=(e={goalLevel:1,selectedRarity:1,sarietto:1,selectedUnits:1,totalExp:1,requiredMinValue:1,requiredMinLevel:1})=>{if((e.goalLevel||e.selectedRarity)&&a>=j[i].length&&n("goalLevel",a=j[i].length),e.sarietto||e.selectedUnits){n("totalExp",v=0);const e=p?11:10;for(const[t,l]of Object.entries(s))n("totalExp",v+=l*o[t]*e/10)}if((e.selectedRarity||e.goalLevel||e.totalExp)&&n("requiredMinValue",f=j[i][a-1]-v),e.selectedRarity&&l.set("selectedRarity",i),e.goalLevel&&l.set("goalLevel",a),e.selectedUnits&&l.set("selectedUnits",s),e.sarietto&&l.set("sarietto",p),(e.selectedRarity||e.requiredMinValue||e.requiredMinLevel)&&(n("requiredMinLevel",g=j[i].findIndex(e=>e>f)),g<0&&n("requiredMinLevel",g=j[i].length),n("requiredMinLevel",--g),n("selectedRarity",i),n("requiredMinValue",f),n("goalLevel",a),n("totalExp",v),n("sarietto",p),n("selectedUnits",s)),e.selectedRarity||e.goalLevel){const e=c[i];let t;t=e[e.length-1]<a?e.length:e.findIndex(e=>e>=a),n("goalLevelPresetPrev",d=t>0?e[t-1]:null),t>=0&&e[t]===a&&(t+1<e.length?t++:t=-1),n("goalLevelPresetNext",u=t>=0?e[t]:null)}},{rarityNames:r,selectedRarity:i,goalLevel:a,expUnits:o,selectedUnits:s,totalExp:v,requiredMinLevel:g,sarietto:p,goalLevelPresetNext:u,goalLevelPresetPrev:d,Object:Object,requiredMinValue:f,select_change_handler:function(){i=function(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}(this),n("selectedRarity",i),n("rarityNames",r)},click_handler:function(){const e=a=d;return n("goalLevel",a),n("selectedRarity",i),e},input0_input_handler:function(){a=h(this.value),n("goalLevel",a),n("selectedRarity",i)},click_handler_1:function(){const e=a=u;return n("goalLevel",a),n("selectedRarity",i),e},input1_change_handler:function(){p=this.checked,n("sarietto",p)},click_handler_2:function({unitName:e}){const t=s[e]--;return n("selectedUnits",s),t},input_input_handler:function({unitName:e}){s[e]=h(this.value),n("selectedUnits",s),n("Object",Object),n("expUnits",o)},click_handler_3:function({unitName:e}){const t=s[e]++;return n("selectedUnits",s),t}}}return new class extends O{constructor(e){super(),R(this,e,F,I,i,[])}}({target:document.querySelector(".container")})}();
//# sourceMappingURL=bundle.js.map
