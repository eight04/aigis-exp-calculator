var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function l(t){t.forEach(e)}function o(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(t,e){t.appendChild(e)}function i(t,e,n){t.insertBefore(e,n||null)}function s(t){t.parentNode.removeChild(t)}function u(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function a(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function f(){return d(" ")}function g(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function p(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function h(t){return""===t?null:+t}function m(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function $(t,e){t.value=null==e?"":e}function b(t,e){for(let n=0;n<t.options.length;n+=1){const l=t.options[n];if(l.__value===e)return void(l.selected=!0)}t.selectedIndex=-1}let v;function y(t){v=t}const k=[],_=[],x=[],O=[],j=Promise.resolve();let E=!1;function C(t){x.push(t)}let S=!1;const L=new Set;function w(){if(!S){S=!0;do{for(let t=0;t<k.length;t+=1){const e=k[t];y(e),A(e.$$)}for(y(null),k.length=0;_.length;)_.pop()();for(let t=0;t<x.length;t+=1){const e=x[t];L.has(e)||(L.add(e),e())}x.length=0}while(k.length);for(;O.length;)O.pop()();E=!1,S=!1,L.clear()}}function A(t){if(null!==t.fragment){t.update(),l(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(C)}}const I=new Set;function N(t,e){-1===t.$$.dirty[0]&&(k.push(t),E||(E=!0,j.then(w)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function q(r,c,i,u,a,d,f,g=[-1]){const p=v;y(r);const h=r.$$={fragment:null,ctx:null,props:d,update:t,not_equal:a,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(p?p.$$.context:c.context||[]),callbacks:n(),dirty:g,skip_bound:!1,root:c.target||p.$$.root};f&&f(h.root);let m=!1;if(h.ctx=i?i(r,c.props||{},((t,e,...n)=>{const l=n.length?n[0]:e;return h.ctx&&a(h.ctx[t],h.ctx[t]=l)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](l),m&&N(r,t)),e})):[],h.update(),m=!0,l(h.before_update),h.fragment=!!u&&u(h.ctx),c.target){if(c.hydrate){const t=function(t){return Array.from(t.childNodes)}(c.target);h.fragment&&h.fragment.l(t),t.forEach(s)}else h.fragment&&h.fragment.c();c.intro&&(($=r.$$.fragment)&&$.i&&(I.delete($),$.i(b))),function(t,n,r,c){const{fragment:i,on_mount:s,on_destroy:u,after_update:a}=t.$$;i&&i.m(n,r),c||C((()=>{const n=s.map(e).filter(o);u?u.push(...n):l(n),t.$$.on_mount=[]})),a.forEach(C)}(r,c.target,c.anchor,c.customElement),w()}var $,b;y(p)}var z={iron:[0,32,65,100,135,172,211,250,291,333,418,506,598,693,791,893,998,1106,1218,1333,1503,1679,1862,2052,2249,2452,2662,2879,3103,3333],bronze:[0,35,72,110,149,189,232,275,320,366,460,557,658,762,870,982,1098,1217,1340,1466,1653,1847,2048,2257,2474,2697,2928,3167,3413,3666,3978,4301,4637,4984,5345,5718,6103,6501,6910,7334],silver:[0,38,78,120,162,206,253,300,349,400,502,607,718,832,949,1072,1198,1327,1462,1600,1804,2015,2234,2462,2699,2942,3194,3455,3724,4e3,4339,4692,5058,5437,5831,6238,6658,7092,7538,8e3,8678,9383,10115,10874,11662,12474,13315,14183,15078,16e3,17017,18074,19172,20312,21492],gold:[0,42,85,130,176,224,274,325,378,433,543,658,777,901,1028,1161,1297,1438,1583,1733,1954,2183,2421,2668,2924,3188,3461,3743,4034,4333,4701,5083,5480,5890,6317,6757,7212,7683,8167,8667,9402,10165,10958,11781,12633,13514,14425,15365,16335,17333,18435,19581,20770,22005,23283,24605,25970,27381,28835,30333,31802,33329,34917,36561,38266,40028,41850,43729,45669,47667,49503,51412,53395,55452,57582,59786,62062,64412,66836,69333,71904,74577,77354,80233,83214,86299,89487,92777,96170,99667,102237,104911,107687,110566,113549,116633,119820,123111,126504],platinum:[0,45,91,140,189,241,295,350,407,466,585,708,837,970,1107,1250,1397,1548,1705,1866,2104,2351,2607,2873,3149,3433,3727,4031,4344,4666,5062,5474,5901,6343,6803,7277,7767,8274,8795,9334,10125,10947,11801,12687,13605,14553,15534,16547,17591,18666,19853,21087,22368,23698,25074,26498,27968,29487,31053,32666,34248,35893,37603,39374,41209,43107,45069,47093,49182,51334,53311,55367,57502,59717,62012,64385,66836,69367,71977,74666,77435,80314,83304,86405,89615,92938,96370,99914,103568,107334,110102,112981,115970,119071,122283,125605,129037,132581,136235],black:[0,48,98,150,203,258,317,375,437,500,627,759,897,1040,1187,1340,1497,1659,1827,2e3,2255,2519,2793,3078,3374,3678,3993,4319,4655,5e3,5424,5865,6323,6797,7289,7797,8322,8865,9423,10001,10848,11729,12644,13593,14577,15593,16644,17729,18848,2e4,21272,22593,23966,25391,26865,28391,29966,31593,33272,35e3,36695,38457,40289,42186,44153,46187,48288,50457,52695,55001,57119,59322,61610,63983,66441,68984,71610,74322,77118,8e4,82967,86051,89255,92577,96017,99576,103254,107051,110966,115001,117966,121052,124254,127577,131018,134577,138254,142052,145967]};function J(t,e,n){const l=t.slice();return l[23]=e[n][0],l[24]=e[n][1],l[25]=e,l[26]=n,l}function M(t,e,n){const l=t.slice();return l[27]=e[n],l}function P(t){let e,n,l,o,r,c=t[4]+1+"",u=(z[t[0]][t[4]+1]-t[7]||"-")+"";return{c(){e=d("需先餵銅肥至 LV"),n=d(c),l=d(" ("),o=d(u),r=d(")。")},m(t,c){i(t,e,c),i(t,n,c),i(t,l,c),i(t,o,c),i(t,r,c)},p(t,e){16&e&&c!==(c=t[4]+1+"")&&m(n,c),145&e&&u!==(u=(z[t[0]][t[4]+1]-t[7]||"-")+"")&&m(o,u)},d(t){t&&s(e),t&&s(n),t&&s(l),t&&s(o),t&&s(r)}}}function R(t){let e,n,l,o=-t[7]+"";return{c(){e=d("經驗值溢出 "),n=d(o),l=d("。")},m(t,o){i(t,e,o),i(t,n,o),i(t,l,o)},p(t,e){128&e&&o!==(o=-t[7]+"")&&m(n,o)},d(t){t&&s(e),t&&s(n),t&&s(l)}}}function T(e){let n,l,o,r=e[27]+"";return{c(){n=a("option"),l=d(r),n.__value=o=e[27],n.value=n.__value},m(t,e){i(t,n,e),c(n,l)},p:t,d(t){t&&s(n)}}}function U(t){let e,n,o,r,u,m,b,v,y,k,_,x,O,j,E,C,S,L,w=t[23]+"",A=t[24]+"";function I(){return t[17](t[23])}function N(){t[18].call(O,t[23])}function q(){return t[19](t[23])}return{c(){e=a("label"),n=d(w),o=d(" ("),r=d(A),u=d(")"),b=f(),v=a("div"),y=a("button"),k=d("-"),x=f(),O=a("input"),E=f(),C=a("button"),C.textContent="+",p(e,"for",m=t[23]),p(e,"class","svelte-11lkdat"),p(y,"type","button"),y.disabled=_=t[2][t[23]]<1,p(O,"id",j=t[23]),p(O,"type","number"),p(O,"min","0"),p(O,"class","svelte-11lkdat"),p(C,"type","button"),p(v,"class","number-group svelte-11lkdat")},m(l,s){i(l,e,s),c(e,n),c(e,o),c(e,r),c(e,u),i(l,b,s),i(l,v,s),c(v,y),c(y,k),c(v,x),c(v,O),$(O,t[2][t[23]]),c(v,E),c(v,C),S||(L=[g(y,"click",I),g(O,"input",N),g(C,"click",q)],S=!0)},p(e,n){t=e,4&n&&_!==(_=t[2][t[23]]<1)&&(y.disabled=_),2052&n&&h(O.value)!==t[2][t[23]]&&$(O,t[2][t[23]])},d(t){t&&s(e),t&&s(b),t&&s(v),S=!1,l(L)}}}function B(e){let n,o,r,v,y,k,_,x,O,j,E,S,L,w,A,I,N,q,z,B,V,X,D,F,G,H,K,Q,W,Y,Z,tt,et,nt,lt,ot,rt,ct,it,st,ut;function at(t,e){return t[7]<0?R:P}let dt=at(e),ft=dt(e),gt=e[10],pt=[];for(let t=0;t<gt.length;t+=1)pt[t]=T(M(e,gt,t));let ht=Object.entries(e[11]),mt=[];for(let t=0;t<ht.length;t+=1)mt[t]=U(J(e,ht,t));return{c(){n=a("h1"),n.textContent="Aigis EXP Calculator",o=f(),r=a("p"),v=d("共可獲得 "),y=d(e[3]),k=d(" 經驗。\r\n\r\n"),ft.c(),_=f(),x=a("div"),O=a("label"),O.textContent="稀有度",j=f(),E=a("select");for(let t=0;t<pt.length;t+=1)pt[t].c();S=f(),L=a("label"),L.textContent="目標等級",w=f(),A=a("div"),I=a("button"),N=d("<"),B=f(),V=a("input"),X=f(),D=a("button"),F=d(">"),K=f(),Q=a("label"),W=a("input"),Y=d("\r\n    使用育成聖靈"),Z=f(),tt=a("fieldset"),et=a("legend"),et.textContent="聖靈︰",nt=f(),lt=a("div");for(let t=0;t<mt.length;t+=1)mt[t].c();ot=f(),rt=a("label"),rt.textContent="額外經驗值",ct=f(),it=a("input"),p(O,"for","rarity"),p(O,"class","svelte-11lkdat"),p(E,"id","rarity"),p(E,"class","svelte-11lkdat"),void 0===e[0]&&C((()=>e[12].call(E))),p(L,"for","goalLevel"),p(L,"class","svelte-11lkdat"),p(I,"type","button"),I.disabled=q=!e[9],p(I,"title",z=e[9]||""),p(V,"id","goalLevel"),p(V,"type","number"),p(V,"min","0"),p(V,"class","svelte-11lkdat"),p(D,"type","button"),D.disabled=G=!e[8],p(D,"title",H=e[8]||""),p(A,"class","number-group svelte-11lkdat"),p(W,"type","checkbox"),p(W,"class","svelte-11lkdat"),p(Q,"class","span-2 svelte-11lkdat"),p(x,"class","form-group svelte-11lkdat"),p(rt,"for","custom"),p(rt,"class","svelte-11lkdat"),p(it,"id","custom"),p(it,"type","number"),p(it,"min","0"),p(it,"class","svelte-11lkdat"),p(lt,"class","form-group svelte-11lkdat")},m(t,l){i(t,n,l),i(t,o,l),i(t,r,l),c(r,v),c(r,y),c(r,k),ft.m(r,null),i(t,_,l),i(t,x,l),c(x,O),c(x,j),c(x,E);for(let t=0;t<pt.length;t+=1)pt[t].m(E,null);b(E,e[0]),c(x,S),c(x,L),c(x,w),c(x,A),c(A,I),c(I,N),c(A,B),c(A,V),$(V,e[1]),c(A,X),c(A,D),c(D,F),c(x,K),c(x,Q),c(Q,W),W.checked=e[5],c(Q,Y),i(t,Z,l),i(t,tt,l),c(tt,et),c(tt,nt),c(tt,lt);for(let t=0;t<mt.length;t+=1)mt[t].m(lt,null);c(lt,ot),c(lt,rt),c(lt,ct),c(lt,it),$(it,e[6]),st||(ut=[g(E,"change",e[12]),g(I,"click",e[13]),g(V,"input",e[14]),g(D,"click",e[15]),g(W,"change",e[16]),g(it,"input",e[20])],st=!0)},p(t,[e]){if(8&e&&m(y,t[3]),dt===(dt=at(t))&&ft?ft.p(t,e):(ft.d(1),ft=dt(t),ft&&(ft.c(),ft.m(r,null))),1024&e){let n;for(gt=t[10],n=0;n<gt.length;n+=1){const l=M(t,gt,n);pt[n]?pt[n].p(l,e):(pt[n]=T(l),pt[n].c(),pt[n].m(E,null))}for(;n<pt.length;n+=1)pt[n].d(1);pt.length=gt.length}if(1025&e&&b(E,t[0]),512&e&&q!==(q=!t[9])&&(I.disabled=q),512&e&&z!==(z=t[9]||"")&&p(I,"title",z),2&e&&h(V.value)!==t[1]&&$(V,t[1]),256&e&&G!==(G=!t[8])&&(D.disabled=G),256&e&&H!==(H=t[8]||"")&&p(D,"title",H),32&e&&(W.checked=t[5]),2052&e){let n;for(ht=Object.entries(t[11]),n=0;n<ht.length;n+=1){const l=J(t,ht,n);mt[n]?mt[n].p(l,e):(mt[n]=U(l),mt[n].c(),mt[n].m(lt,ot))}for(;n<mt.length;n+=1)mt[n].d(1);mt.length=ht.length}64&e&&h(it.value)!==t[6]&&$(it,t[6])},i:t,o:t,d(t){t&&s(n),t&&s(o),t&&s(r),ft.d(),t&&s(_),t&&s(x),u(pt,t),t&&s(Z),t&&s(tt),u(mt,t),st=!1,l(ut)}}}function V(t,e,n){let l;const o={get:function(t,e){const n=localStorage.getItem(t);return null===n?e:JSON.parse(n)},set:function(t,e){localStorage.setItem(t,JSON.stringify(e))}},r=Object.keys(z);let c=o.get("selectedRarity","iron"),i=Math.min(o.get("goalLevel",99),z[c].length);const s={"微金祝":1750,"小銀祝":4e3,"八倍白胖":8e3,"活動經驗包":1e4,"八倍皇帝":16e3,"小金祝/贈送祝聖":18e3,"小白祝":19e3,"小黑祝":2e4,"八倍黑胖":4e4,"大祝聖哈比":15e4},u={iron:[],bronze:[],silver:[30,50,55],gold:[20,50,60,80,99],platinum:[50,70,90,99],black:[50,80,99]},a=Object.assign(Object.fromEntries(Object.entries(s).map((([t])=>[t,0]))),o.get("selectedUnits"));let d=0,f=0,g=o.get("sarietto",!1),p=0,m=0,$=o.get("custom",0);return t.$$.update=()=>{if(3&t.$$.dirty&&i>=z[c].length&&n(1,i=z[c].length),108&t.$$.dirty){n(3,d=0);const t=g?11:10;for(const[e,l]of Object.entries(a))n(3,d+=l*s[e]*t/10);n(3,d+=$)}if(11&t.$$.dirty&&n(7,l=z[c][i-1]-d),1&t.$$.dirty&&o.set("selectedRarity",c),2&t.$$.dirty&&o.set("goalLevel",i),4&t.$$.dirty&&o.set("selectedUnits",a),32&t.$$.dirty&&o.set("sarietto",g),64&t.$$.dirty&&o.set("custom",$),145&t.$$.dirty&&(n(4,f=z[c].findIndex((t=>t>l))),f<0&&n(4,f=z[c].length),n(4,f--,f)),3&t.$$.dirty){const t=u[c];let e;e=t[t.length-1]<i?t.length:t.findIndex((t=>t>=i)),n(9,m=e>0?t[e-1]:0),e>=0&&t[e]===i&&(e+1<t.length?e++:e=-1),n(8,p=e>=0?t[e]:0)}},[c,i,a,d,f,g,$,l,p,m,r,s,function(){c=function(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}(this),n(0,c),n(10,r)},()=>n(1,i=m),function(){i=h(this.value),n(1,i),n(0,c)},()=>n(1,i=p),function(){g=this.checked,n(5,g)},t=>n(2,a[t]--,a),function(t){a[t]=h(this.value),n(2,a),n(11,s)},t=>n(2,a[t]++,a),function(){$=h(this.value),n(6,$)}]}return new class extends class{$destroy(){!function(t,e){const n=t.$$;null!==n.fragment&&(l(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}{constructor(t){super(),q(this,t,V,B,r,{})}}({target:document.querySelector(".container")})}();
//# sourceMappingURL=bundle.js.map
